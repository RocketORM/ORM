<?php

{% block namespace %}
namespace {{ schema.namespace.raw }}\TableMap;
{% endblock %}

{% block import %}
use Rocket\ORM\Model\Map\TableMap;
{% endblock import %}

{% block comment %}
/**
 * Generated by Rocket ORM.
 * Do not edit this file, use the generation command instead.
 *
 * "{{ schema.database }}.{{ model.tableName }}" Table Map
 */
{% endblock %}
{% block definition %}
class {{ model.className }}TableMap extends {% block extends 'TableMap' %}
{% endblock %}

{
    /**
     * Configure the table map
     */
    public function configure()
    {
        {% block schema -%}
        $this->setConnectionName('{{ schema.connection }}');
        $this->setDatabase('{{ schema.database }}');
        {% endblock %}

        {% block model -%}
        $this->setTableName('{{ model.tableName }}');
        $this->setClassName('{{ model.className }}');
        $this->setClassNamespace('{{ schema.namespace.escaped }}');
        {% endblock %}

        {% block columns -%}
        {% for column in model.columns -%}
            $this->addColumn('
                {{- column.name }}', '{{ column.phpName }}', {{ column.type }}, {{ null == column.size ? 'null' : column.size }},
                {{- null == column.decimal ? ' null' : ' ' ~ column.decimal }},
                {%- if null == column.default %} null{% else %} '{{ column.default }}'{% endif %},
                {{- column.required ? ' true' : ' false' -}}
            );
        {% endfor %}
        {% endblock %}

        {% block primary_keys -%}
        {% for primaryKey in model.primaryKeys -%}
            $this->addPrimaryKey('{{ primaryKey.name }}', {{ primaryKey.autoincrement ? 'true' : 'false' }});
        {%- endfor %}
        {% endblock %}
        {% block relations %}{% if model.relations.length > 0 %}

        {% for relation in model.relations -%}
            $this->addRelation('{{ relation.namespace }}', '{{ relation.name }}', {{ relation.type }}, '{{ relation.columns.local }}', '{{ relation.columns.foreign }}');
        {% endfor %}{% endif %}
        {% endblock %}

    }

    {%- block custom '' %}

}
