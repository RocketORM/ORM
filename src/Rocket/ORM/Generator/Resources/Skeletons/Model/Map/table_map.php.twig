<?php

{% block namespace %}
namespace {{ schema.namespace.raw }}\TableMap;
{% endblock %}

{% block import %}
use Rocket\ORM\Model\Map\TableMap;
{% endblock import %}

{% block comment %}
/**
 * Generated by Rocket ORM.
 * Do not edit this file, use the generation command instead.
 *
 * "{{ schema.database }}.{{ table.name }}" Table Map
 */
{% endblock %}
{% block definition %}
class {{ table.phpName }}TableMap extends {% block extends 'TableMap' %}
{% endblock %}

{
    /**
     * Configure the table map
     */
    public function configure()
    {
        {% block schema -%}
        $this->setConnectionName('{{ schema.connection }}');
        $this->setDatabase('{{ schema.database }}');
        {% endblock %}

        {% block model -%}
        $this->setTableName('{{ table.name }}');
        $this->setClassName('{{ table.phpName }}');
        $this->setClassNamespace('{{ schema.namespace.escaped }}');
        {% endblock %}

        {% block columns -%}
        {% for column in table.columns -%}
            $this->addColumn('
                {{- column.name }}', '{{ column.phpName }}', {{ column.type }}, {{ null == column.size ? 'null' : column.size }},
                {{- null == column.decimal ? ' null' : ' ' ~ column.decimal }},
                {%- if null == column.default %} null{% else %} '{{ column.default }}'{% endif %},
                {{- column.required ? ' true' : ' false' -}}
            );
        {% endfor %}
        {%- endblock %}

        {% block primary_keys -%}
        {% for primaryKey in table.primaryKeys -%}
            $this->addPrimaryKey('{{ primaryKey.name }}', {{ primaryKey.autoincrement ? 'true' : 'false' }});
        {%- endfor %}{% endblock %}

    {% block relations %}{% if table.relations|length > 0 %}

        {% for relation in table.relations -%}
            $this->addRelation('{{ relation.with }}', '{{ relation.phpName }}', {{ relation.type }}, '{{ relation.local }}', '{{ relation.foreign }}');
    {% endfor %}{% endif %}
        {%- endblock -%}

    }

    {%- block custom '' %}

}
